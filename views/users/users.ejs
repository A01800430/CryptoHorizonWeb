<%- include('../partials/header') %>

<body>
  <!-- Navbar superior -->
  <div class="menu-container">
    <%- include('../partials/navbar') %>
  </div>

  <!-- Contenido principal -->
  <main class="container mt-5">
    <h2 class="text-primary mb-4">ğŸ‘¥ All Users</h2>

    <!-- ğŸ§® KPIs -->
    <div class="row text-center mb-4">
      <div class="col-md-4">
        <div class="card shadow border-0">
          <div class="card-body">
            <h5 class="text-success">Total Users</h5>
            <p class="fs-4 fw-bold"><%= totalUsers %></p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow border-0">
          <div class="card-body">
            <h5 class="text-primary">New This Month</h5>
            <p class="fs-4 fw-bold"><%= newUsers %></p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow border-0">
          <div class="card-body">
            <h5 class="text-warning">Active This Month</h5>
            <p class="fs-4 fw-bold"><%= activeUsers %></p>
          </div>
        </div>
      </div>
    </div>

    <!-- ğŸ” Filtros -->
    <form method="get" class="row g-2 mb-4">
      <!-- PaÃ­s -->
      <div class="col-md-3">
        <select name="country" class="form-select">
          <option value="">ğŸŒ Country</option>
          <% countries.forEach(c => { %>
            <option value="<%= c.country %>" <%= country === c.country ? 'selected' : '' %>><%= c.country %></option>
          <% }) %>
        </select>
      </div>

      <!-- GÃ©nero -->
      <div class="col-md-3">
        <select name="gender" class="form-select">
          <option value="">ğŸš» Gender</option>
          <% genders.forEach(g => { %>
            <option value="<%= g.gender %>" <%= gender === g.gender ? 'selected' : '' %>><%= g.gender %></option>
          <% }) %>
        </select>
      </div>

      <!-- Dispositivo -->
      <div class="col-md-3">
        <select name="device" class="form-select">
          <option value="">ğŸ’» Device</option>
          <% devices.forEach(d => { %>
            <option value="<%= d.deviceModel %>" <%= device === d.deviceModel ? 'selected' : '' %>><%= d.deviceModel %></option>
          <% }) %>
        </select>
      </div>

      <!-- BotÃ³n -->
      <div class="col-md-3">
        <button type="submit" class="btn btn-primary w-100">Apply Filters</button>
      </div>
    </form>

<!-- ğŸ“‹ Tabla de usuarios -->
<table class="table table-hover table-striped">
  <thead class="table-dark">
    <tr>
      <th>#</th> <!-- Nueva columna -->
      <th>Username</th>
      <th>Email</th>
      <th>Country</th>
      <th>Gender</th>
      <th>Device</th>
      <th>Language</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach((user, index) => { %>
      <tr onclick="window.location.href='/users/users/<%= user.id_usuario %>'" style="cursor: pointer;">
        <td><%= index + 1 %></td> <!-- NÃºmero de fila -->
        <td><%= user.userName %></td>
        <td><%= user.email %></td>
        <td><%= user.country %></td>
        <td><%= user.gender || 'N/A' %></td>
        <td><%= user.deviceModel %></td>
        <td><%= user.systemLanguage %></td>
      </tr>
    <% }) %>
  </tbody>
</table>

  </main>

  <%- include('../partials/footer') %>
</body>
