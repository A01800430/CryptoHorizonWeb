<%- include('../partials/header') %>

<!-- Evita que la página se recargue desde caché si se vuelve atrás en el navegador -->
<script>
  window.onpageshow = function(event) {
    if (event.persisted) {
      window.location.reload();
    }
  };
</script>

<body>
  <!-- Navbar superior -->
  <div class="menu-container">
    <%- include('../partials/navbar') %>
  </div>

  <!-- Contenido principal -->
  <main class="container-fluid py-4">

    <!-- Encabezado de la sección -->
    <div class="d-flex justify-content-between align-items-center mb-4 px-3">
      <div>
        <h1 class="fw-bold text-primary">📊 Usage Patterns</h1>
        <p class="text-muted">Análisis detallado de patrones de uso y engagement</p>
      </div>
    </div>

    <!-- Gráfico tipo Gantt (sesiones por usuario en el tiempo) -->
    <div class="card p-4">
      <h4 class="text-secondary">📅 Gantt Chart</h4>
      <div id="ganttChartDiv" style="width: 100%; height: 400px;"></div>
    </div>

    <!-- Heatmap de sesiones por hora y día -->
    <div class="col-md-12 mb-4">
      <div class="card p-4">
        <h4 class="text-secondary">🌡️ Heatmap de Uso por Hora y Día</h4>
        <div id="chartdiv" style="width: 100%; height: 500px;"></div>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <%- include('../partials/footer') %>

  <!-- Librerías amCharts (requeridas para el Gantt Chart) -->
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

  <!-- Scripts personalizados para los gráficos -->
  <script src="/js/charts/ganttChart.js"></script>
  <script src="/js/charts/heatmap.js"></script>

</body>
